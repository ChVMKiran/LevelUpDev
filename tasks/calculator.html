<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #04153F;
            color: white;
        }
        
        .container {
            display: flex;
            height: 100svh;
            flex-direction: row;
        }
        
        .left,
        .right {
            width: 50%;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }
        
        .left-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .left-tab-button {
            color: white;
            font-weight: bold;
            padding: 8px 16px;
            background-color: #1E006E;
            border: 1px solid #00FFE1;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .left-tab-button.active {
            background-image: linear-gradient(145deg, #00FFF7, #6E00FF);
            color: #04153F;
        }
        
        .tab-content {
            background: #121E3A;
            padding: 15px;
            border-radius: 10px;
            display: none;
            color: #D1D5DB;
            line-height: 1.6;
            height: calc(100svh - 110px);
            overflow-y: auto;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .right h3 {
            color: white;
        }
        
        .sec {
            margin-bottom: 10px;
            display: flex;
            gap: 5px;
            align-items: center;
        }
        
        .button {
            color: white;
            font-weight: bold;
            width: 110px;
            height: 31px;
            border: 1px solid gray;
            background: #1E006E;
            cursor: pointer;
            border-radius: 5px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .button img {
            height: 18px;
            width: 18px;
        }
        
        .button:hover {
            background-image: linear-gradient(145deg, #00FFF7, #6E00FF);
            border: 0;
        }
        
        .curr {
            border: 2px solid #00FFE1;
            background: #1E006E;
            color: #00FFE1;
        }
        
        .hide {
            display: none;
        }
        
        .cp {
            width: 100%;
            display: flex;
            flex-direction: row-reverse;
        }
        
        .copy {
            border: 1px solid gray;
            width: 80px;
            background-color: #1E006E;
            color: white;
            font-size: 16px;
            padding: 5px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
        }
        
        .copy:hover {
            background: linear-gradient(145deg, #00FFF7, #6E00FF);
            color: white;
            border: none;
        }
        
        textarea {
            width: 95%;
            height: 65vh;
            padding: 10px;
            resize: none;
            border: 1px solid rgb(192, 188, 188);
            background-color: hsl(224, 82%, 12%);
            color: white;
            font-size: 1rem;
            font-family: monospace;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        
        .rp {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }
        
        .run {
            color: white;
            font-weight: bold;
            width: 140px;
            height: 35px;
            background: #1E006E;
            border-radius: 8px;
            border: 1px solid #00FFE1;
            cursor: pointer;
            margin-right: 10px;
        }
        
        .run:hover {
            background: linear-gradient(145deg, #00FFF7, #6E00FF);
            color: #04153F;
        }
        
        .mark {
            width: 100%;
            display: flex;
            flex-direction: row-reverse;
        }
        
        .mk {
            border: 2px solid rgb(7, 255, 7);
            width: 150px;
            background-color: #1E006E;
            color: rgb(4, 255, 4);
            font-size: 16px;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            justify-content: center;
        }
        
        .mk:hover {
            background: #00e791;
            color: white;
            border: none;
        }
         #mark-as-completed {
            background-color: #04153F;
            border: 1px solid #00FF7F;
            border-radius: 10px;
            padding: 10px 20px;
            color: #00FF7F;
            font-weight: 600;
            cursor: pointer;
        }

        #mark-as-completed:hover {
            background-color: #00FF7F;
            color: #1E006E;
        }

        #heart{
            width: fit-content;
            height: 30px;
            background-color: #121E3A;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            padding: 5px 10px;
            font-weight: bold;
            transition: color 0.3s ease;
            font-size: 20px;
        }
        #heart:hover {
            color: red;
        }

        .heading {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        @media(max-width:768px) {
            .container {
                flex-direction: column;
                height: auto;
            }
            .left,
            .right {
                width: 100%;
                height: auto;
            }
            .tab-content {
                height: fit-content;
            }
            textarea {
                height: 50vh;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="left">
            <div class="left-tabs">
                <button class="left-tab-button active" onclick="showTab('description', this)">Description</button>
                <button class="left-tab-button" onclick="showTab('editorial', this)">Editorial</button>
            </div>
            <div id="description" class="tab-content active">
                <div class="heading"><h2>Calculator</h2>
                <i id="heart" class="fas fa-heart white-heart"></i></div>
                <p><strong>Description:</strong><br />You are required to create a basic calculator web application using HTML, CSS, and JavaScript. It should perform simple arithmetic operations like addition, subtraction, multiplication, and division.
                    Users should be able to input numbers by clicking buttons, and the display should update in real-time without refreshing the page.</p>
                <center>
                    <video autoplay loop muted playsinline width="60%" style="border-radius: 10px; max-width: 300px;">
                        <source src="./calculator.mp4" type="video/mp4">
                    </video>
                </center>
                <p><strong>Functional Requirements:</strong></p>
                <ul>
                    <li>The calculator must support the four basic arithmetic operations: +, -, x, and /.</li>
                    <li>Inputs must be handled via on-screen buttons.</li>
                    <li>A 'C' (Clear) button must clear the entire display.</li>
                    <li>A 'Del' (Delete) button must remove the last character from the display.</li>
                    <li>An '=' button must evaluate the expression and show the result.</li>
                    <li>The calculator should handle basic error cases (e.g., division by zero, invalid expressions).</li>
                </ul>
            </div>

            <div id="editorial" class="tab-content">
                <div class="sec">
                    <button class="html button curr" onclick="showEditorialCode('html-code-2', this)">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="HTML Logo">HTML
                    </button>
                    <button class="css button" onclick="showEditorialCode('css-code-2', this)">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg" alt="CSS Logo">CSS
                    </button>
                    <button class="js button" onclick="showEditorialCode('js-code-2', this)">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JS Logo">JS
                    </button>
                    <div class="cp"><button class="copy" onclick="copyCode(this)"><i class="fa-solid fa-copy"></i> Copy</button></div>
                </div>
                <textarea id="html-code-2" placeholder="Write HTML here..." disabled>
<div class="calculator-container">
    <h1 id="title">Calculator</h1>
    <input id="display" type="text" readonly>
    <div id="keys">
        <button class="btn operator">C</button>
        <button class="btn operator">Del</button>
        <button class="btn operator">%</button>
        <button class="btn operator">/</button>
        <button class="btn">7</button>
        <button class="btn">8</button>
        <button class="btn">9</button>
        <button class="btn operator">x</button>
        <button class="btn">4</button>
        <button class="btn">5</button>
        <button class="btn">6</button>
        <button class="btn operator">-</button>
        <button class="btn">1</button>
        <button class="btn">2</button>
        <button class="btn">3</button>
        <button class="btn operator">+</button>
        <button class="btn">0</button>
        <button class="btn">.</button>
        <button class="btn operator">^</button>
        <button id="calculate">=</button>
    </div>
</div>
                </textarea>
                <textarea id="css-code-2" class="hide" placeholder="Write CSS here..." disabled>
body {
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    background-color: #f0f0f0;
}
.calculator-container {
    width: 360px;
    background-color: black;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}
#title {
    text-align: center;
    color: rgb(237, 165, 72);
    font-size: 40px;
    margin: 10px 0 20px;
    font-family: sans-serif;
}
#display {
    width: 100%;
    height: 70px;
    border: none;
    background-color: #333;
    color: white;
    font-size: 3rem;
    text-align: right;
    padding: 10px;
    box-sizing: border-box;
    border-radius: 10px;
    margin-bottom: 20px;
}
#keys {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}
button {
    height: 70px;
    width: 70px;
    border-radius: 50%;
    color: white;
    background-color: #555;
    font-size: 1.5rem;
    font-weight: bold;
    cursor: pointer;
    border: none;
    transition: background-color 0.2s;
}
button:hover {
    background-color: #777;
}
button:active {
    background-color: #999;
}
.operator, #calculate {
    background-color: rgb(255, 140, 0);
}
.operator:hover, #calculate:hover {
    background-color: #ffab40;
}
                </textarea>
                <textarea id="js-code-2" class="hide" placeholder="Write JS here..." disabled>
const display = document.getElementById("display");
const buttons = document.querySelectorAll("#keys button");

buttons.forEach(button => {
    button.addEventListener('click', () => {
        const value = button.innerText;
        let currentDisplay = display.value;

        // Clear error message on new input
        if (currentDisplay === 'Error') {
            currentDisplay = '';
        }

        if (value === 'C') {
            display.value = '';
        } else if (value === 'Del') {
            display.value = currentDisplay.slice(0, -1);
        } else if (value === '=') {
            try {
                // Replace custom operators with JS equivalents
                let expression = currentDisplay
                    .replace(/x/g, '*')
                    .replace(/\^/g, '');
                
                // Use a safer evaluation method than eval()
                const result = new Function('return ' + expression)();
                
                if (isNaN(result) || !isFinite(result)) {
                   throw new Error("Invalid calculation");
                }
                display.value = result;
            } catch (error) {
                display.value = 'Error';
            }
        } else {
            display.value = currentDisplay + value;
        }
    });
});
                </textarea>
            </div>
        </div>
        <div class="right">
            <h3>🛠 Code Editor</h3>
            <div class="sec">
                <button class="html button curr" onclick="showEditorCode('html-code', this)">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="HTML Logo">HTML
                </button>
                <button class="css button" onclick="showEditorCode('css-code', this)">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg" alt="CSS Logo">CSS
                </button>
                <button class="js button" onclick="showEditorCode('js-code', this)">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JS Logo">JS
                </button>
            </div>
            <textarea id="html-code" placeholder="Write HTML here..."></textarea>
            <textarea id="css-code" class="hide" placeholder="Write CSS here..."></textarea>
            <textarea id="js-code" class="hide" placeholder="Write JS here..."></textarea>
            <div class="rp">
                <button onclick="runCode()" class="run">Run</button>
                <div class="mark-container">
                    <button id="mark-as-completed">Mark as Completed</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        let classes = new Array(9);
        let fav_btn = document.querySelector("#heart");
        classes[0] = "fav-task1";
        classes[1] = "fav-task2";
        classes[2] = "fav-task3";
        classes[3] = "fav-task4";
        classes[4] = "fav-task5";
        classes[5] = "fav-task6";
        classes[6] = "fav-task7";
        classes[7] = "fav-task8";
        classes[8] = "fav-task9";
        fav_btn.addEventListener('click', () => {
            if(localStorage.getItem(classes[localStorage.getItem("task_page")]) >= 0) {
                localStorage.setItem(classes[localStorage.getItem("task_page")], -1);
                document.getElementById("heart").style.color = "white";
            }
            else {
                localStorage.setItem(classes[localStorage.getItem("task_page")], localStorage.getItem("task_page"));
                document.getElementById("heart").style.color = "red";
            }
        });
        if(localStorage.getItem(classes[localStorage.getItem("task_page")]) >= 0) {
            document.getElementById("heart").style.color = "red";
        }
        else {
            document.getElementById("heart").style.color = "white";
        }
        function showTab(tabId, buttonElement) {
            const contents = document.querySelectorAll('.left .tab-content');
            const buttons = document.querySelectorAll('.left .left-tab-button');
            contents.forEach(c => c.classList.remove('active'));
            buttons.forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            buttonElement.classList.add('active');
        }

        function showEditorCode(codeId, buttonElement) {
            const textareas = document.querySelectorAll('.right textarea');
            textareas.forEach(t => t.classList.add('hide'));
            document.getElementById(codeId).classList.remove('hide');

            const buttons = buttonElement.parentElement.querySelectorAll('.button');
            buttons.forEach(btn => btn.classList.remove('curr'));
            buttonElement.classList.add('curr');
        }
        function runCode() {
            runInNewPage();
        }
        function showEditorialCode(codeId, buttonElement) {
            const textareas = document.querySelectorAll('#editorial textarea');
            textareas.forEach(t => t.classList.add('hide'));
            document.getElementById(codeId).classList.remove('hide');

            const buttons = buttonElement.parentElement.querySelectorAll('.button');
            buttons.forEach(btn => btn.classList.remove('curr'));
            buttonElement.classList.add('curr');
        }

        function copyCode(buttonElement) {
            const activeCodeButton = document.querySelector("#editorial .button.curr");
            const codeType = activeCodeButton.classList[0]; // Gets 'html', 'css', or 'js'
            const textAreaId = `${codeType}-code-2`;
            const textArea = document.getElementById(textAreaId);
        
            navigator.clipboard.writeText(textArea.value).then(() => {
                buttonElement.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';
                setTimeout(() => {
                    buttonElement.innerHTML = '<i class="fa-solid fa-copy"></i> Copy';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        }

        function runInNewPage() {
            const html = document.getElementById("html-code").value;
            const css = document.getElementById("css-code").value;
            const js = document.getElementById("js-code").value;

            const userCode = `
                <!DOCTYPE html>
                <html>
                <head>
                    <style>${css}</style>
                </head>
                <body>
                    ${html}
                    <script>${js.replace(/<\/script>/g, "<\\/script>")}
                    <\/script>
                </body>
                </html>
            `;

            const externalWindow = window.open();
            if (externalWindow) {
                externalWindow.document.open();
                externalWindow.document.write(userCode);
                externalWindow.document.close();
            } else {
                alert("Popup blocked! Please allow popups for this site.");
            }
        }
         const submitBtn = document.getElementById('mark-as-completed');
        const isCompleted = localStorage.getItem('task5');
        if(isCompleted === 'false') submitBtn.innerHTML = 'Mark as Completed';
        else submitBtn.innerHTML = 'Marked as Completed';
       document.addEventListener('DOMContentLoaded', function() {

    const submitBtn = document.getElementById('mark-as-completed');
    
    if (submitBtn) {
        const isCompleted = localStorage.getItem('task5');
        if(isCompleted === 'true') { 
            submitBtn.innerHTML = 'Marked as Completed';
        } else {
            submitBtn.innerHTML = 'Mark as Completed';
        }

        submitBtn.addEventListener('click', function() {
            
            if(submitBtn.innerHTML === 'Marked as Completed') return;
            
            if(localStorage.getItem('loggedInUserName') === 'none') {
                window.location.href = '/login.html';
                return; 
            }
            
            localStorage.setItem('task5', 'true'); 
            localStorage.setItem('hard-count', (parseInt(localStorage.getItem('hard-count') || 0)) + 1);
            localStorage.setItem('total-count', (parseInt(localStorage.getItem('total-count') || 0)) + 1);
            
            const taskTitle = document.querySelector('#description h2').innerHTML;
            localStorage.setItem('last-submitted', taskTitle);
            
            window.location.reload();
        });
    }
});
    </script>
</body>

</html>